<!doctype html>
<html itemscope itemtype="http://schema.org/Product" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Parceler</title>

    <meta name="description" itemprop="description" content="Parceler - "/>

    <meta itemprop="name" content="Parceler"/>
    <meta itemprop="description" content="Android Parcelable code generator for Google Android"/>
    <meta itemprop="image" content="http://parceler.org/images/package_emoji_large.png"/>
    <meta itemprop="url" content=""/>

    <meta name="author" content="John Ericksen"/>

    <link rel="stylesheet" href="css/foundation.css"/>
    <link rel="stylesheet" href="css/font-awesome.css"/>
    <link rel="stylesheet" href="css/coderay.css"/>
    <link rel="stylesheet" href="css/asciidoctor.css"/>
    <link rel="stylesheet" href="css/local.css"/>
    <script src="js/vendor/modernizr.js"></script>
    <script src="js/vendor/jquery.js"></script>
    <script src="js/toc.js"></script>
</head>
<body>


<!-- Nav Bar -->

<div class="row">
    <div class="large-12 columns">
        <h1><img src="images/package_emoji.png"/> <a class="title" href="">Parceler</a></h1>
        <h5>Android Parcelable code generator for Google Android</h5>
    </div>
    <hr/>
</div>

<!-- End Nav -->


<!-- Main Page Content and Sidebar -->

<div class="row">
    <div class="large-12 columns">
        <div class="paragraph">
<p>Have a question?  <a href="http://stackoverflow.com/questions/ask?tags=parceler">Ask it on StackOverflow.</a></p>
</div>
<div class="paragraph">
<p>Found an issue?  <a href="https://github.com/johncarl81/parceler/issues/new">Please report it.</a></p>
</div>
<div class="sect2">
<h3 id="introduction">Introduction</h3>
<div class="paragraph">
<p>In Android, <a href="http://developer.android.com/reference/android/os/Parcelable.html">Parcelables</a> are a great way to serialize Java Objects between Contexts.
<a href="http://www.developerphil.com/parcelable-vs-serializable/">Compared</a> with traditional Serialization, Parcelables take on the order of 10x less time to both serialize and deserialize.
There is a major flaw with Parcelables, however.
Parcelables contain a ton of boilerplate code.
To implement a Parcelable, you must mirror the <code>writeToParcel()</code> and <code>createFromParcel()</code> methods such that they read and write to the Parcel in the same order.
Also, a Parcelable must define a <code>public final static Parcelable.Creator CREATOR</code> in order for the Android infrastructure to be able to leverage the serialization code.</p>
</div>
<div class="paragraph">
<p>Parceler is a code generation library that generates the Android Parcelable boilerplate source code.
No longer do you have to implement the Parcelable interface, the <code>writeToParcel()</code> or <code>createFromParcel()</code> or the <code>public static final CREATOR</code>.
You simply annotate a POJO with <code>@Parcel</code> and Parceler does the rest.
Because Parceler uses the Java JSR-269 Annotation Processor, there is no need to run a tool manually to generate the Parcelable code.
Just annotate your Java Bean, compile and you are finished.
By default, Parceler will serialize the fields of your instance directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Example</span> {
    <span class="predefined-type">String</span> name;
    <span class="type">int</span> age;

    <span class="directive">public</span> Example(){ <span class="comment">/*Required empty bean constructor*/</span> }

    <span class="directive">public</span> Example(<span class="type">int</span> age, <span class="predefined-type">String</span> name) {
        <span class="local-variable">this</span>.age = age;
        <span class="local-variable">this</span>.name = name;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getName() { <span class="keyword">return</span> name; }

    <span class="directive">public</span> <span class="type">int</span> getAge() { <span class="keyword">return</span> age; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be careful not to use private fields when using the default field serialization strategy as it will incur a performance penalty due to reflection.</p>
</div>
<div class="paragraph">
<p>To use the generated code, you may reference the generated class directly, or via the <code>Parcels</code> utility class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Parcelable wrapped = Parcels.wrap(<span class="keyword">new</span> Example(<span class="string"><span class="delimiter">&quot;</span><span class="content">Andy</span><span class="delimiter">&quot;</span></span>, <span class="integer">42</span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>To dereference the <code>@Parcel</code>, just call the <code>Parcels.unwrap()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Example example = Parcels.unwrap(wrapped);
example.getName(); <span class="comment">// Andy</span>
example.getAge(); <span class="comment">// 42</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, the wrapped <code>Parcelable</code> can be added to an Android Bundle to transfer from Activity to Activity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Bundle bundle = <span class="keyword">new</span> Bundle();
bundle.putParcelable(<span class="string"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>, Parcels.wrap(example));</code></pre>
</div>
</div>
<div class="paragraph">
<p>And dereferenced in the <code>onCreate()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Example example = Parcels.unwrap(getIntent().getParcelableExtra(<span class="string"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>This wrapping and unwrapping technique plays well with the Intent Factory pattern.
In addition, Parceler is supported by the following libraries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://androidtransfuse.org/documentation.html#parcel">Transfuse</a> - Allows <code>@Parcel</code> annotated beans to be used with the <code>@Extra</code> injection.</p>
</li>
<li>
<p><a href="https://github.com/sockeqwe/fragmentargs#argsbundler">FragmentArgs</a> - Uses the <code>ParcelerArgsBundler</code> adapter to wrap and unwrap <code>@Parcel</code> annotated beans with fragment parameters.</p>
</li>
<li>
<p><a href="https://github.com/f2prateek/dart">Dart</a> - Autodetects <code>@Parcel</code> annotated beans and automatically unwraps them when using <code>@InjectExtra</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="parcel_attribute_types">Parcel attribute types</h3>
<div class="paragraph">
<p>Only a select number of types may be used as attributes of a <code>@Parcel</code> class.
The following list includes the mapped types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>byte</code></p>
</li>
<li>
<p><code>double</code></p>
</li>
<li>
<p><code>float</code></p>
</li>
<li>
<p><code>int</code></p>
</li>
<li>
<p><code>long</code></p>
</li>
<li>
<p><code>char</code></p>
</li>
<li>
<p><code>boolean</code></p>
</li>
<li>
<p><code>String</code></p>
</li>
<li>
<p><code>IBinder</code></p>
</li>
<li>
<p><code>Bundle</code></p>
</li>
<li>
<p><code>SparseArray</code> of any of the mapped types*</p>
</li>
<li>
<p><code>SparseBooleanArray</code></p>
</li>
<li>
<p><code>List</code>, <code>ArrayList</code> and <code>LinkedList</code> of any of the mapped types*</p>
</li>
<li>
<p><code>Map</code>, <code>HashMap</code>, <code>LinkedHashMap</code>, <code>SortedMap</code>, and <code>TreeMap</code> of any of the mapped types*</p>
</li>
<li>
<p><code>Set</code>, <code>HashSet</code>, <code>SortedSet</code>, <code>TreeSet</code>, <code>LinkedHashSet</code> of any of the mapped types*</p>
</li>
<li>
<p><code>Parcelable</code></p>
</li>
<li>
<p><code>Serializable</code></p>
</li>
<li>
<p>Array of any of the mapped types</p>
</li>
<li>
<p>Any other class annotated with <code>@Parcel</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>*Parcel will error if the generic parameter is not mapped.</p>
</div>
<div class="paragraph">
<p>Parceler also supports any of the above types directly.
This is especially useful when dealing with collections of classes annotated with <code>@Parcel</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Parcelable listParcelable = Parcels.wrap(<span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Example&gt;());
Parcelable mapParcelable = Parcels.wrap(<span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;<span class="predefined-type">String</span>, Example&gt;());</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="polymorphism">Polymorphism</h4>
<div class="paragraph">
<p>Note that Parceler does not unwrap inheritance hierarchies, so any polymorphic fields will be unwrapped as instances of the base class.
This is because Parceler opts for performance rather than checking <code>.getClass()</code> for every piece of data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Example</span> {
    <span class="directive">public</span> Parent p;
    Example(Parent p) { <span class="local-variable">this</span>.p = p; }
}

<span class="annotation">@Parcel</span> <span class="directive">public</span> <span class="type">class</span> <span class="class">Parent</span> {}
<span class="annotation">@Parcel</span> <span class="directive">public</span> <span class="type">class</span> <span class="class">Child</span> <span class="directive">extends</span> Parent {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Example example = <span class="keyword">new</span> Example(<span class="keyword">new</span> Child());
<span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">%b</span><span class="delimiter">&quot;</span></span>, example.p <span class="keyword">instanceof</span> Child); <span class="comment">// true</span>
example = Parcels.unwrap(Parcels.wrap(example));
<span class="predefined-type">System</span>.out.println(<span class="string"><span class="delimiter">&quot;</span><span class="content">%b</span><span class="delimiter">&quot;</span></span>, example.p <span class="keyword">instanceof</span> Child); <span class="comment">// false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Refer to the <a href="#custom_serialization">Custom Serialization</a> section for an example of working with polymorphic fields.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="serialization_techniques">Serialization techniques</h3>
<div class="paragraph">
<p>Parceler offers several choices for how to serialize and deserialize an object in addition to the field-based serialization seen above.</p>
</div>
<div class="sect3">
<h4 id="getter_setter_serialization">Getter/setter serialization</h4>
<div class="paragraph">
<p>Parceler may be configured to serialize using getter and setter methods and a non-empty constructor.
In addition, fields, methods and constructor parameters may be associated using the <code>@ParcelProperty</code> annotation.
This supports a number of bean strategies including immutability and traditional getter/setter beans.</p>
</div>
<div class="paragraph">
<p>To configure default method serialization, simply configure the <code>@Parcel</code> annotation with <code>Serialization.BEAN</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>(Serialization.BEAN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Example</span> {
    <span class="directive">private</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="type">int</span> age;

    <span class="directive">public</span> <span class="predefined-type">String</span> getName() { <span class="keyword">return</span> name; }
    <span class="directive">public</span> <span class="type">void</span> setName(<span class="predefined-type">String</span> name) { <span class="local-variable">this</span>.name = name; }

    <span class="directive">public</span> <span class="type">int</span> getAge() { <span class="keyword">return</span> age; }
    <span class="directive">public</span> <span class="type">void</span> setAge(<span class="type">int</span> age) { <span class="local-variable">this</span>.age = age; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use a constructor with serialization, annotate the desired constructor with the <code>@ParcelConstructor</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>(Serialization.BEAN)
<span class="directive">public</span> <span class="type">class</span> <span class="class">Example</span> {
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> name;
    <span class="directive">private</span> <span class="directive">final</span> <span class="type">int</span> age;

    <span class="annotation">@ParcelConstructor</span>
    <span class="directive">public</span> Example(<span class="type">int</span> age, <span class="predefined-type">String</span> name) {
        <span class="local-variable">this</span>.age = age;
        <span class="local-variable">this</span>.name = name;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getName() { <span class="keyword">return</span> name; }

    <span class="directive">public</span> <span class="type">int</span> getAge() { <span class="keyword">return</span> age; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If an empty constructor is present, Parceler will use that constructor unless another constructor is annotated.</p>
</div>
</div>
<div class="sect3">
<h4 id="mixing_getters_setters_and_fields">Mixing getters/setters and fields</h4>
<div class="paragraph">
<p>You may also mix and match serialization techniques using the <code>@ParcelProperty</code> annotation.
In the following example, <code>firstName</code> and <code>lastName</code> are written to the bean using the constructor while <code>firstName</code> is read from the bean using the field and <code>lastName</code> is read using the <code>getLastName()</code> method.
The parameters <code>firstName</code> and <code>lastName</code> are coordinated by the parameter names <code>"first"</code> and <code>"last"</code> respectfully.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Example</span> {
    <span class="annotation">@ParcelProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">first</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">String</span> firstName;
    <span class="predefined-type">String</span> lastName;

    <span class="annotation">@ParcelConstructor</span>
    <span class="directive">public</span> Example(<span class="annotation">@ParcelProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">first</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> firstName, <span class="annotation">@ParcelProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> lastName){
        <span class="local-variable">this</span>.firstName = firstName;
        <span class="local-variable">this</span>.lastName = lastName;
    }

    <span class="directive">public</span> <span class="predefined-type">String</span> getFirstName() { <span class="keyword">return</span> firstName; }

    <span class="annotation">@ParcelProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="predefined-type">String</span> getLastName() { <span class="keyword">return</span> lastName; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For attributes that should not be serialized with Parceler, the attribute field, getter or setter may be annotated by <code>@Transient</code>.  In addition, fields marked with the <code>transient</code> keyword will also not be serialized.</p>
</div>
<div class="paragraph">
<p>Parceler supports many different styles centering around the POJO.
This allows <code>@Parcel</code> annotated classes to be used with other POJO based libraries, including <a href="https://code.google.com/p/google-gson/">GSON</a>, <a href="https://realm.io/docs/java/latest/#parceler">Realm</a>, <a href="https://bitbucket.org/qbusict/cupboard">Cupboard</a>, and <a href="http://simple.sourceforge.net/">Simple XML</a> to name a few.</p>
</div>
</div>
<div class="sect3">
<h4 id="static_factory_support">Static Factory support</h4>
<div class="paragraph">
<p>As an alternative to using a constructor directly, Parceler supports using an annotated Static Factory to build an instance of the given class.
This style supports Google&#8217;s <a href="https://github.com/google/auto/tree/master/value">AutoValue</a> annotation processor / code generation library for generating immutable beans.
Parceler interfaces with AutoValue via the <code>@ParcelFactory</code> annotation, which maps a static factory method into the annotated <code>@Parcel</code> serialization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@AutoValue</span>
<span class="annotation">@Parcel</span>
<span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">AutoValueParcel</span> {

    <span class="annotation">@ParcelProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>) <span class="directive">public</span> <span class="directive">abstract</span> <span class="predefined-type">String</span> value();

    <span class="annotation">@ParcelFactory</span>
    <span class="directive">public</span> <span class="directive">static</span> AutoValueParcel create(<span class="predefined-type">String</span> value) {
        <span class="keyword">return</span> <span class="keyword">new</span> AutoValue_AutoValueParcel(value);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>AutoValue generates a different class than the annotated <code>@Parcel</code>, therefore, you need to specify which class Parceler should build in the <code>Parcels</code> utility class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Parcelable wrappedAutoValue = Parcels.wrap(AutoValueParcel.class, AutoValueParcel.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>And to deserialize:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">AutoValueParcel autoValueParcel = Parcels.unwrap(wrappedAutoValue);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="custom_serialization">Custom serialization</h4>
<div class="paragraph">
<p><code>@Parcel</code> includes an optional parameter to include a manual serializer <code>ParcelConverter</code> for the case where special serialization is necessary.
This provides a still cleaner option for using Parcelable classes than implementing them by hand.</p>
</div>
<div class="paragraph">
<p>The following code demonstrates using a <code>ParcelConverter</code> to unwrap the inheritance hierarchy during deserialization.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Item</span> {
    <span class="annotation">@ParcelPropertyConverter</span>(ItemListParcelConverter.class)
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Item&gt; itemList;
}
<span class="annotation">@Parcel</span> <span class="directive">public</span> <span class="type">class</span> <span class="class">SubItem1</span> <span class="directive">extends</span> Item {}
<span class="annotation">@Parcel</span> <span class="directive">public</span> <span class="type">class</span> <span class="class">SubItem2</span> <span class="directive">extends</span> Item {}

<span class="directive">public</span> <span class="type">class</span> <span class="class">ItemListParcelConverter</span> <span class="directive">implements</span> ParcelConverter&lt;<span class="predefined-type">List</span>&lt;Item&gt;&gt; {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> toParcel(<span class="predefined-type">List</span>&lt;Item&gt; input, Parcel parcel) {
        <span class="keyword">if</span> (input == <span class="predefined-constant">null</span>) {
            parcel.writeInt(-<span class="integer">1</span>);
        }
        <span class="keyword">else</span> {
            parcel.writeInt(input.size());
            <span class="keyword">for</span> (Item item : input) {
                parcel.writeParcelable(Parcels.wrap(item), <span class="integer">0</span>);
            }
        }
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;Item&gt; fromParcel(Parcel parcel) {
        <span class="type">int</span> size = parcel.readInt();
        <span class="keyword">if</span> (size &lt; <span class="integer">0</span>) <span class="keyword">return</span> <span class="predefined-constant">null</span>;
        <span class="predefined-type">List</span>&lt;Item&gt; items = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;Item&gt;();
        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="integer">0</span>; i &lt; size; ++i) {
            items.add((Item) Parcels.unwrap(parcel.readParcelable(Item.class.getClassLoader())));
        }
        <span class="keyword">return</span> items;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parceler is also packaged with a series of base classes to make Collection conversion easier located under the <code>org.parceler.converter</code> package of the api.
These base classes take care of a variety of difficult or verbose jobs dealing with Collections including null checks and collectin iteration.
For instance, the above <code>ParcelConverter</code> could be written using the `ArrayListParcelConverter':</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ItemListParcelConverter</span> <span class="directive">extends</span> ArrayListParcelConverter&lt;Item&gt; {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> itemToParcel(Item item, Parcel parcel) {
        parcel.writeParcelable(Parcels.wrap(item), <span class="integer">0</span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> Item itemFromParcel(Parcel parcel) {
        <span class="keyword">return</span> Parcels.unwrap(parcel.readParcelable(Item.class.getClassLoader()));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="classes_without_java_source">Classes without Java source</h3>
<div class="paragraph">
<p>For classes whose corresponding Java source is not available, one may include the class as a Parcel by using the <code>@ParcelClass</code> annotation.
This annotation may be declared anywhere in the compiled source that is convenient.
For instance, one could include the <code>@ParcelClass</code> along with the Android Application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@ParcelClass</span>(LibraryParcel.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AndroidApplication</span> <span class="directive">extends</span> Application{
    <span class="comment">//...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple <code>@ParcelClass</code> annotations may be declared using the <code>@ParcelClasses</code> annotation.</p>
</div>
</div>
<div class="sect2">
<h3 id="advanced_configuration">Advanced configuration</h3>
<div class="sect3">
<h4 id="skipping_analysis">Skipping analysis</h4>
<div class="paragraph">
<p>It is a common practice for some libraries to require a bean to extend a base class.
Although it is not the most optimal case, Parceler supports this practice by allowing the configuration of what classes in the inheritance hierarchy to analyze via the analyze parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Parcel</span>(analyze = {One.class, Three.class})
<span class="type">class</span> <span class="class">One</span> <span class="directive">extends</span> Two {}
<span class="type">class</span> <span class="class">Two</span> <span class="directive">extends</span> Three {}
<span class="type">class</span> <span class="class">Three</span> <span class="directive">extends</span> BaseClass {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, only fields of the <code>One</code> and <code>Three</code> classes will be serialized, avoiding both the <code>BaseClass</code> and <code>Two</code> class parameters.</p>
</div>
</div>
<div class="sect3">
<h4 id="specific_wrapping">Specific wrapping</h4>
<div class="paragraph">
<p>The Parcels utility class looks up the given class for wrapping by class.
For performance reasons this ignores inheritance, both super and base classes.
There are two solutions to this problem.
First, one may specify additional types to associate to the given type via the <code>implementations</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">class</span> <span class="class">ExampleProxy</span> <span class="directive">extends</span> Example {}
<span class="annotation">@Parcel</span>(implementations = {ExampleProxy.class})
<span class="type">class</span> <span class="class">Example</span> {}

ExampleProxy proxy = <span class="keyword">new</span> ExampleProxy();
Parcels.wrap(proxy);  <span class="comment">// ExampleProxy will be serialized as a Example</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Second, one may also specify the class type when using the <code>Parcels.wrap()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ExampleProxy proxy = <span class="keyword">new</span> ExampleProxy();
Parcels.wrap(Example.class, proxy);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="avoiding_parcels_indexing">Avoiding Parcels indexing</h4>
<div class="paragraph">
<p>Using Parceler in libraries can be challenging because Parceler writes a single mapping class <code>Parceler$$Parcels</code> to associate a given type with a <code>Parcelable</code>.
This mapping class can collide giving the following error during compilation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">Error Code:
    2
Output:
    UNEXPECTED TOP-LEVEL EXCEPTION:
    com.android.dex.DexException: Multiple dex files define Lorg/parceler/Parceler$$Parcels$1;
        at com.android.dx.merge.DexMerger.readSortableTypes(DexMerger.java:594)
        at com.android.dx.merge.DexMerger.getSortedTypes(DexMerger.java:552)
        at com.android.dx.merge.DexMerger.mergeClassDefs(DexMerger.java:533)
        ....</code></pre>
</div>
</div>
<div class="paragraph">
<p>To avoid writing this common mapping class, set <code>parcelsIndex = false</code> to each of the library classes.
Parceler will not write a <code>Parceler$$Parcels</code> mapping class if no indexable classes exist and the Parcels utiltiy class will fallback to looking up the generated class by name.</p>
</div>
<div class="paragraph">
<p>Alternatively, using <code>@ParcelClass</code> in the root project, instead of annotating classes directly in the library can avoid this issue.</p>
</div>
</div>
<div class="sect3">
<h4 id="configuring_proguard">Configuring Proguard</h4>
<div class="paragraph">
<p>To configure Proguard, add the following lines to your proguard configuration file.  These will keep files related to the <code>Parcels</code> utilty class and the <code>Parcelable</code> <code>CREATOR</code> instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Parcel library
-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keep class org.parceler.Parceler$$Parcels</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_parceler">Getting Parceler</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may download Parceler as a Maven dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.parceler<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>parceler<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.4<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>provided<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.parceler<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>parceler-api<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.0.4<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>or Gradle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">compile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.parceler:parceler-api:1.0.4</span><span class="delimiter">&quot;</span></span>
apt <span class="string"><span class="delimiter">&quot;</span><span class="content">org.parceler:parceler:1.0.4</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note">
</td>
<td class="content">
For details on using the apt scope see the <a href="https://bitbucket.org/hvisser/android-apt">android-apt project</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Or from <a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.parceler%22">Maven Central</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license">License</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>Copyright 2011-2015 John Ericksen

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
</div>
</div>
</div>
</div>
    </div>
</div>

<!-- End Main Content and Sidebar -->


<!-- Footer -->

<footer class="row">
    <div class="large-12 columns">
        <hr/>
    </div>
</footer>

<a href="https://github.com/johncarl81/parceler"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>
<script src="js/foundation.min.js"></script>
<script>
    $(document).foundation();

    var doc = document.documentElement;
    doc.setAttribute('data-useragent', navigator.userAgent);
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11587475-3', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
